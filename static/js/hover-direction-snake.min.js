(function ($) {
    $.fn.snakeify = function (options) {
        var settings = $.extend({
            inaccuracy: 30,
            speed: 200
        }, options);

        // Function to handle mouse enter event
        function handleMouseEnter(event) {
            var $this = $(this),
                $overlay = $this.find(".overlay"),
                offset = $this.offset(),
                x = event.pageX - offset.left,
                y = event.pageY - offset.top;

            // Code for hover effect
            $overlay.css({ top: 0, left: 0, width: $this.width(), height: $this.height() });
            if (x > $this.width() - settings.inaccuracy) {
                $overlay.css({ top: 0, left: $this.width() });
            } else if (x < settings.inaccuracy) {
                $overlay.css({ top: 0, left: -$this.width() });
            } else if (y > $this.height() - settings.inaccuracy) {
                $overlay.css({ top: $this.height(), left: 0 });
            } else if (y < settings.inaccuracy) {
                $overlay.css({ top: -$this.height(), left: 0 });
            }
            $overlay.animate({ top: 0, left: 0 }, settings.speed);
        }

        // Function to handle mouse leave event
        function handleMouseLeave(event) {
            var $this = $(this),
                $overlay = $this.find(".overlay"),
                offset = $this.offset(),
                x = event.pageX - offset.left,
                y = event.pageY - offset.top;

            // Code for mouse leave effect
            if (x <= 0) {
                $overlay.animate({ top: 0, left: -$this.width() }, settings.speed);
            } else if (x >= $this.width()) {
                $overlay.animate({ top: 0, left: $this.width() }, settings.speed);
            } else if (y <= 0) {
                $overlay.animate({ left: 0, top: -$this.height() }, settings.speed);
            } else if (y >= $this.height()) {
                $overlay.animate({ left: 0, top: $this.height() }, settings.speed);
            }
        }

        // Check if the device width is greater than 768px (adjust as needed)
        if ($(window).width() > 768) {
            // Attach mouseenter and mouseleave events
            this.find(".overlay").css({ top: -9999999 });
            this.mouseenter(handleMouseEnter).mouseleave(handleMouseLeave);
        } else {
            // Attach scroll event for animations on phones
            var $elements = this;
            $(window).scroll(function () {
                // Trigger animations when elements come into view
                $elements.each(function () {
                    if ($(this).offset().top - $(window).scrollTop() < $(window).height()) {
                        handleMouseEnter.call(this, {});
                    } else {
                        handleMouseLeave.call(this, {});
                    }
                });
            });
        }
    };
})(jQuery);
